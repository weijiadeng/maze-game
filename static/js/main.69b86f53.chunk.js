(this.webpackJsonplabyrinth=this.webpackJsonplabyrinth||[]).push([[0],{52:function(t,o,n){},53:function(t,o,n){},54:function(t,o,n){"use strict";n.r(o);var e=n(1),i=n.n(e),r=n(20),s=n.n(r),a=n(9),c=n(26),l=Object(c.b)({name:"control",initialState:{direction:0,posX:0,posZ:0,currentAction:0,isInit:!1,wallTop:[],wallLeft:[],numX:0,numZ:0},reducers:{moveForward:function(t){if(4===t.currentAction)switch(t.currentAction=0,t.direction){case 0:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallTop[t.posX+t.posZ*(t.numX+1)]||(t.posZ-=1);break;case 3:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallLeft[t.posX+1+t.posZ*(t.numX+1)]||(t.posX+=1);break;case 2:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallTop[t.posX+(t.posZ+1)*(t.numX+1)]||(t.posZ+=1);break;case 1:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallLeft[t.posX+t.posZ*(t.numX+1)]||(t.posX-=1);break;default:console.log("Direction error: ",t.direction)}},moveBackward:function(t){if(4===t.currentAction)switch(t.currentAction=3,t.direction){case 0:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallTop[t.posX+(t.posZ+1)*(t.numX+1)]||(t.posZ+=1);break;case 3:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallLeft[t.posX+t.posZ*(t.numX+1)]||(t.posX-=1);break;case 2:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallTop[t.posX+t.posZ*(t.numX+1)]||(t.posZ-=1);break;case 1:t.posX>=0&&t.posX<=t.numX&&t.posZ>=0&&t.posZ<=t.numZ&&t.wallLeft[t.posX+1+t.posZ*(t.numX+1)]||(t.posX+=1);break;default:console.log("Direction error: ",t.direction)}},turnLeft:function(t){4===t.currentAction&&(t.currentAction=2,t.direction=(t.direction+1)%4)},turnRight:function(t){4===t.currentAction&&(t.currentAction=1,t.direction=((t.direction-1)%4+4)%4)},popEvent:function(t){t.currentAction=4},assignPosX:function(t,o){t.posX=o.payload},assignPosZ:function(t,o){t.posZ=o.payload},assignWallTop:function(t,o){t.wallTop=o.payload},assignWallLeft:function(t,o){t.wallLeft=o.payload},assignNumX:function(t,o){t.numX=o.payload},assignNumZ:function(t,o){t.numZ=o.payload},assignInit:function(t,o){t.isInit=o.payload}}}),u=l.actions,p=u.moveForward,b=u.moveBackward,h=u.turnLeft,d=u.turnRight,f=u.popEvent,m=u.assignPosX,j=u.assignPosZ,k=u.assignWallTop,g=u.assignWallLeft,X=u.assignNumX,O=u.assignNumZ,Z=u.assignInit,w=function(t){return t.control.direction},x=function(t){return t.control.posX},v=function(t){return t.control.posZ},A=function(t){return t.control.currentAction},y=function(t){return t.control.isInit},z=function(t){return t.control.wallTop},L=function(t){return t.control.wallLeft},T=l.reducer,M=n(5);function N(){var t=Object(a.c)();return document.addEventListener("keydown",(function(o){switch(o.key){case"Enter":window.history.go(0);break;case"ArrowLeft":t(h());break;case"ArrowRight":t(d());break;case"ArrowUp":t(p());break;case"ArrowDown":t(b())}})),Object(M.jsxs)("div",{children:[Object(M.jsx)("button",{className:"button forward-button",onClick:function(){return t(p())},children:"Move Forward"}),Object(M.jsx)("button",{className:"button backward-button",onClick:function(){return t(b())},children:"Move Backward"}),Object(M.jsx)("button",{className:"button turn-left-button",onClick:function(){return t(h())},children:"Turn Left"}),Object(M.jsx)("button",{className:"button turn-right-button",onClick:function(){return t(d())},children:"Turn Right"})]})}var C=n(7),D=n(16),S=n(38),W=n(4);Object(D.b)({TrackballControls:S.a});var E=.1,P=function(t){var o=t.blockWidth,n=t.startCoordX,i=t.startCoordZ,r=t.moveSpeed,s=t.turnSpeed,c=Object(D.d)(),l=c.camera,u=c.gl,p=Object(a.d)(A),b=Object(a.d)(x),h=Object(a.d)(v),d=Object(a.d)(w),m=e.useState(0),j=Object(C.a)(m,2),k=j[0],g=j[1],X=k,O=-o/2+(b+1)*o+n,Z=-o/2+(h+1)*o+i,y=Object(a.c)();return Object(D.c)((function(){switch(p){case 0:switch(d){case 0:l.position.z>Z&&(l.position.z-=r,l.lookAt(l.position.x,0,l.position.z-E));break;case 1:l.position.x>O&&(l.position.x-=r,l.lookAt(l.position.x-E,0,l.position.z));break;case 2:l.position.z<Z&&(l.position.z+=r,l.lookAt(l.position.x,0,l.position.z+E));break;case 3:l.position.x<O&&(l.position.x+=r,l.lookAt(l.position.x+E,0,l.position.z));break;default:console.log("direction error!")}l.position.x===O&&l.position.z===Z&&(console.log("success"),y(f()));break;case 3:switch(d){case 0:l.position.z<Z&&(l.lookAt(l.position.x,0,l.position.z-E),l.position.z+=r);break;case 1:l.position.x<O&&(l.position.x+=r,l.lookAt(l.position.x-E,0,l.position.z));break;case 2:l.position.z>Z&&(l.position.z-=r,l.lookAt(l.position.x,0,l.position.z+E));break;case 3:l.position.x>O&&(l.position.x-=r,l.lookAt(l.position.x+E,0,l.position.z));break;default:console.log("direction error!")}l.position.x===O&&l.position.z===Z&&(console.log("success"),y(f()));break;case 2:0===k&&g(X=k+90),X>0&&(l.rotateY(W.Math.degToRad(2)),g(X-=s)),0===X&&y(f());break;case 1:0===k&&(g(k-90),X=k-90),X<0&&(l.rotateY(W.Math.degToRad(-2)),g(X+=s)),0===X&&y(f());break;case 4:break;default:console.log("button error!")}l.updateProjectionMatrix()})),Object(M.jsx)("trackballControls",{args:[l,u.domElement],dynamicDampingFactor:.1,mouseButtons:{LEFT:W.MOUSE.PAN,MIDDLE:W.MOUSE.ZOOM,RIGHT:W.MOUSE.ROTATE}})},I=n(0),R=n(2),B=function(){function t(o){Object(I.a)(this,t),this.partsCount=o,this.path=Array.apply(null,{length:o}).map(Number.call,Number),this.rank=Array.apply(0,{length:o})}return Object(R.a)(t,[{key:"find",value:function(t){for(;t!==this.path[t];)this.path[t]=this.path[this.path[t]],t=this.path[t];return t}},{key:"union",value:function(t,o){var n=this.find(t),e=this.find(o);n!==e&&(this.partsCount-=1,this.rank[n]<this.rank[e]?this.path[n]=e:this.rank[n]>this.rank[e]?this.path[e]=n:(this.path[n]=e,this.rank[e]+=1))}}]),t}();var F=n(55);function H(t,o,n){return n<o?[n-t,n]:[n-o-1,n-o]}function U(t,o){for(var n=t*o,e=(t+1)*(o+1),i=new B(n),r=[],s=[],a=t;a<n;a++)r.push(a);for(var c=n;c<2*n;c++)c%t!==0&&r.push(c);var l=(r=function(t){for(var o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1)),e=t[o];t[o]=t[n],t[n]=e}return t}(r)).length-1;do{var u=r[l],p=H(t,n,u),b=Object(C.a)(p,2),h=b[0],d=b[1];i.find(h)===i.find(d)?s.push(u):i.union(h,d),l-=1}while(1!==i.partsCount);for(;l>=0;)s.push(r[l]),l-=1;for(var f=Array.apply(null,{length:e}).fill(!1),m=Array.apply(null,{length:e}).fill(!1),j=0;j<t;j++)m[j]=!0,m[j+o*(t+1)]=!0;for(var k=0;k<o;k++)f[k*(t+1)]=!0,f[k*(t+1)+t]=!0;for(var g=function(o){return~~(o/t)*(t+1)+o%t},X=0;X<s.length;X++)s[X]<n?m[g(s[X])]=!0:f[g(s[X]-n)]=!0;return f[0]=!1,f[e-1]=!1,m[e-1]=!1,m[e-2]=!1,console.log(f,m),[f,m]}function G(t,o,n,e,i){return Object(M.jsx)(F.a,{args:[n,e,i],rotation:[0,.5*Math.PI,0],position:[t,0,o+n/2],children:Object(M.jsx)("meshPhongMaterial",{color:"orange",attach:"material"})},String(t)+","+String(o)+"left")}function J(t){for(var o,n,e,i,r,s=t.numX,a=t.numZ,c=t.wallTop,l=t.wallLeft,u=t.blockWidth,p=t.blockHeight,b=t.blockDepth,h=t.mazeWidth,d=t.mazeDepth,f=[],m=0;m<s+1;m++)for(var j=0;j<a+1;j++)c[m+(s+1)*j]&&f.push((o=m*u-h-b/2,n=j*u-d,e=u+b,i=p,r=b,Object(M.jsx)(F.a,{args:[e,i,r],rotation:[0,0,0],position:[o+e/2,0,n],children:Object(M.jsx)("meshPhongMaterial",{color:"orange",attach:"material"})},String(o)+","+String(n)+"top"))),l[m+(s+1)*j]&&f.push(G(m*u-h,j*u-d-b/2,u+b,p,b));return Object(M.jsx)("group",{name:"walls",children:f})}var Y=n(56),q=n(57);n(52);function K(t){var o=t.numX,n=t.numZ,e=t.blockWidth,i=t.blockHeight,r=t.blockDepth,s=t.mazeDepth,c=t.mazeWidth,l=Object(a.d)(y),u=Object(a.c)();if(!l){u(m(o-1)),u(j(n-1));var p=U(o,n),b=Object(C.a)(p,2),h=b[0],d=b[1];u(g(h)),u(k(d)),u(X(o)),u(O(n)),u(Z(!0))}var f=-o*e/2,w=-n*e/2,x=-e/2+o*e+f,v=-e/2+n*e+w,A=Object(Y.a)(a.b);return Object(M.jsx)("div",{className:"canvas-div",children:Object(M.jsxs)(D.a,{camera:{fov:80,position:[x,0,v+e]},children:[Object(M.jsx)(A,{children:Object(M.jsx)(P,{blockWidth:e,startCoordX:f,startCoordZ:w,moveSpeed:.5,turnSpeed:2})}),Object(M.jsx)("ambientLight",{color:"#ffffff",intensity:.4}),Object(M.jsx)("directionalLight",{position:[-500,20,w+e/2],intensity:1.5}),Object(M.jsx)(J,{numX:o,numZ:n,wallTop:Object(a.d)(z),wallLeft:Object(a.d)(L),blockWidth:e,blockHeight:i,blockDepth:r,mazeWidth:c,mazeDepth:s}),Object(M.jsx)(q.a,{distance:1e4,sunPosition:[-500,20,w+e/2],inclination:0,azimuth:.25}),Object(M.jsx)(F.b,{"rotation-x":-Math.PI/2,position:[0,-10,0],args:[400,400,4,4],children:Object(M.jsx)("meshBasicMaterial",{attach:"material",opacity:.5,color:"#405940"})})]})})}n(53);function Q(){return Object(M.jsx)("div",{className:"App",children:Object(M.jsxs)("div",{className:"vis-container",children:[Object(M.jsx)(K,{numX:10,numZ:10,blockWidth:40,blockHeight:20,blockDepth:1,mazeDepth:200,mazeWidth:200}),Object(M.jsx)(N,{}),Object(M.jsx)("button",{className:"button new-game-button",onClick:function(){return window.history.go(0)},children:"New Game"})]})})}var V=Object(c.a)({reducer:{control:T}});s.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(a.a,{store:V,children:Object(M.jsx)(Q,{})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.69b86f53.chunk.js.map